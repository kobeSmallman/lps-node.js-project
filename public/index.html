<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Longest Palindromic Substring Analyzer</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --primary-color: #6C63FF;         /* Vibrant purple */
      --primary-dark: #5A52D9;          /* Darker purple */
      --secondary-color: #FF6B6B;       /* Coral red */
      --tertiary-color: #4ECDC4;        /* Turquoise */
      --accent-color: #FFE66D;          /* Yellow */
      --light-bg: #F7F9FC;              /* Light background */
      --card-bg: #ffffff;               /* Card background */
      --success-color: #06d6a0;         /* Success green */
      --warning-color: #FF9F1C;         /* Orange warning */
      --danger-color: #FF5252;          /* Red danger */
      --text-color: #2D3748;            /* Dark text */
      --text-light: #718096;            /* Light text */
      --border-radius: 10px;
      --box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
      --transition: all 0.3s ease;
      --header-height: 70px;
    }
    
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      max-width: 100%;
      margin: 0 auto;
      padding: 0;
      background-color: var(--light-bg);
      color: var(--text-color);
      line-height: 1.6;
      padding-top: var(--header-height);
    }
    
    .header {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      height: var(--header-height);
      background: linear-gradient(90deg, var(--primary-color), var(--tertiary-color));
      color: white;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0 2rem;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      z-index: 1000;
    }
    
    .header .logo {
      font-size: 1.5rem;
      font-weight: bold;
      display: flex;
      align-items: center;
    }
    
    .header .logo i {
      font-size: 1.8rem;
      margin-right: 10px;
      color: var(--accent-color);
    }
    
    .nav-links {
      display: flex;
      list-style: none;
    }
    
    .nav-links li {
      margin-left: 1.5rem;
    }
    
    .nav-links a {
      color: white;
      text-decoration: none;
      font-weight: 500;
      transition: var(--transition);
      position: relative;
      padding: 5px 0;
    }
    
    .nav-links a:hover {
      color: var(--accent-color);
    }
    
    .nav-links a::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 0;
      height: 2px;
      background-color: var(--accent-color);
      transition: var(--transition);
    }
    
    .nav-links a:hover::after {
      width: 100%;
    }
    
    .nav-links .active a {
      color: var(--accent-color);
    }
    
    .nav-links .active a::after {
      width: 100%;
    }
    
    .main-content {
      padding: 30px;
      max-width: 1200px;
      margin: 0 auto;
    }
    
    h1, h2, h3 {
      color: var(--primary-color);
      margin-bottom: 20px;
    }
    
    h1 {
      text-align: center;
      font-size: 2.4rem;
      margin-bottom: 30px;
      border-bottom: 3px solid var(--secondary-color);
      padding-bottom: 15px;
    }
    
    h2 {
      font-size: 1.6rem;
      margin-top: 30px;
      color: var(--secondary-color);
    }
    
    p {
      margin-bottom: 15px;
    }
    
    .container {
      background-color: var(--card-bg);
      border-radius: var(--border-radius);
      padding: 40px;
      box-shadow: var(--box-shadow);
      margin-bottom: 40px;
      border-top: 5px solid var(--primary-color);
    }
    
    .explanation {
      background-color: rgba(108, 99, 255, 0.1);
      border-left: 5px solid var(--primary-color);
      padding: 20px;
      margin-bottom: 30px;
      border-radius: 8px;
    }
    
    .input-section {
      display: flex;
      flex-direction: column;
      gap: 25px;
      margin-bottom: 40px;
    }
    
    .tabs {
      display: flex;
      margin-bottom: 25px;
      border-bottom: 1px solid #ddd;
    }
    
    .tab {
      padding: 12px 24px;
      cursor: pointer;
      background-color: #f5f5f5;
      border: 1px solid #ddd;
      border-bottom: none;
      border-top-left-radius: 8px;
      border-top-right-radius: 8px;
      margin-right: 8px;
      transition: var(--transition);
      font-weight: 500;
    }
    
    .tab.active {
      background: linear-gradient(135deg, var(--primary-color) 0%, var(--tertiary-color) 100%);
      border-bottom: 1px solid transparent;
      margin-bottom: -1px;
      font-weight: 600;
      color: white;
    }
    
    .tab-content {
      display: none;
      padding: 25px;
      border: 1px solid #ddd;
      border-top: none;
      background-color: white;
      border-bottom-left-radius: 8px;
      border-bottom-right-radius: 8px;
    }
    
    .tab-content.active {
      display: block;
    }
    
    textarea {
      width: 100%;
      padding: 18px;
      border: 1px solid #ddd;
      border-radius: var(--border-radius);
      min-height: 150px;
      font-size: 16px;
      resize: vertical;
      font-family: inherit;
      transition: var(--transition);
      box-shadow: inset 0 1px 3px rgba(0,0,0,0.1);
    }
    
    textarea:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(108, 99, 255, 0.2);
    }
    
    .file-upload {
      border: 2px dashed var(--tertiary-color);
      padding: 40px;
      text-align: center;
      border-radius: var(--border-radius);
      transition: var(--transition);
      cursor: pointer;
      background-color: rgba(78, 205, 196, 0.05);
    }
    
    .file-upload:hover {
      border-color: var(--primary-color);
      background-color: rgba(108, 99, 255, 0.05);
    }
    
    .file-upload input {
      display: none;
    }
    
    .file-upload i {
      font-size: 2.5rem;
      color: var(--tertiary-color);
      margin-bottom: 15px;
    }
    
    .file-info {
      margin-top: 20px;
      font-size: 14px;
      color: var(--text-light);
      background-color: #f8f9fa;
      padding: 10px;
      border-radius: 6px;
    }
    
    .accepted-files {
      margin-top: 15px;
      font-size: 14px;
      color: var(--text-light);
    }
    
    .accepted-files span {
      display: inline-block;
      background-color: rgba(78, 205, 196, 0.2);
      padding: 4px 8px;
      border-radius: 4px;
      margin: 0 4px;
      font-family: monospace;
    }
    
    button {
      background: linear-gradient(135deg, var(--primary-color), var(--tertiary-color));
      color: white;
      border: none;
      padding: 14px 28px;
      border-radius: var(--border-radius);
      cursor: pointer;
      font-size: 16px;
      font-weight: 600;
      transition: var(--transition);
      width: 100%;
      max-width: 300px;
      margin: 0 auto;
      display: block;
      box-shadow: 0 4px 6px rgba(108, 99, 255, 0.2);
    }
    
    button:hover {
      background: linear-gradient(135deg, var(--primary-dark), var(--tertiary-color));
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(108, 99, 255, 0.3);
    }
    
    button:active {
      transform: translateY(0);
    }
    
    button:disabled {
      background: linear-gradient(135deg, #b3b3b3, #cccccc);
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }
    
    #results {
      margin-top: 40px;
      display: none;
    }
    
    .result-card {
      background-color: var(--card-bg);
      border-radius: var(--border-radius);
      padding: 30px;
      margin-bottom: 30px;
      border-left: 5px solid var(--primary-color);
      position: relative;
      overflow: hidden;
      box-shadow: var(--box-shadow);
      transition: var(--transition);
    }
    
    .result-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
    }
    
    .result-card.naive {
      border-left-color: var(--warning-color);
    }
    
    .result-card.dp {
      border-left-color: var(--primary-color);
    }
    
    .result-card.manacher {
      border-left-color: var(--tertiary-color);
    }
    
    .result-title {
      font-weight: 600;
      margin-bottom: 20px;
      color: var(--text-color);
      font-size: 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .complexity {
      font-size: 14px;
      color: var(--text-light);
      background-color: rgba(0,0,0,0.05);
      padding: 5px 10px;
      border-radius: 20px;
      font-family: monospace;
    }
    
    .result-content {
      margin-bottom: 20px;
      word-break: break-all;
    }
    
    .palindrome-preview {
      background-color: #fff;
      padding: 20px;
      border-radius: 8px;
      border: 1px solid #eee;
      margin-bottom: 20px;
      font-family: monospace;
      position: relative;
      box-shadow: inset 0 1px 3px rgba(0,0,0,0.05);
    }
    
    .palindrome-highlight {
      background-color: rgba(108, 99, 255, 0.15);
      color: var(--primary-color);
      font-weight: bold;
      padding: 2px 0;
      border-radius: 2px;
    }
    
    .performance {
      display: flex;
      gap: 30px;
      font-size: 14px;
      color: var(--text-light);
      margin-top: 20px;
      border-top: 1px solid #eee;
      padding-top: 20px;
    }
    
    .performance-item {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .performance-item i {
      font-size: 18px;
      color: var(--primary-color);
    }
    
    .loading {
      text-align: center;
      display: none;
      margin: 40px 0;
    }
    
    .spinner {
      border: 4px solid rgba(108, 99, 255, 0.1);
      border-left: 4px solid var(--primary-color);
      border-radius: 50%;
      width: 40px;
      height: 40px;
      animation: spin 1s linear infinite;
      margin: 0 auto 20px;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    .error {
      color: var(--danger-color);
      background-color: rgba(255, 82, 82, 0.1);
      padding: 20px;
      border-radius: var(--border-radius);
      margin-top: 30px;
      display: none;
      border-left: 5px solid var(--danger-color);
    }
    
    .index-info {
      font-size: 13px;
      color: var(--text-light);
      margin-top: 8px;
      background-color: #f8f9fa;
      padding: 5px 10px;
      border-radius: 4px;
      display: inline-block;
    }
    
    .comparison-header {
      margin-top: 40px;
      margin-bottom: 30px;
      text-align: center;
      color: var(--primary-color);
      font-size: 1.8rem;
      position: relative;
    }
    
    .comparison-header:after {
      content: "";
      display: block;
      width: 80px;
      height: 4px;
      background: linear-gradient(90deg, var(--primary-color), var(--tertiary-color));
      margin: 15px auto 0;
      border-radius: 2px;
    }
    
    .tooltip {
      position: relative;
      display: inline-block;
      cursor: help;
      color: var(--primary-color);
    }
    
    .tooltip .tooltip-text {
      visibility: hidden;
      width: 240px;
      background-color: #333;
      color: #fff;
      text-align: center;
      border-radius: 8px;
      padding: 12px;
      position: absolute;
      z-index: 1;
      bottom: 125%;
      left: 50%;
      transform: translateX(-50%);
      opacity: 0;
      transition: opacity 0.3s;
      font-size: 13px;
      line-height: 1.5;
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    }
    
    .tooltip:hover .tooltip-text {
      visibility: visible;
      opacity: 0.95;
    }
    
    .algorithm-info {
      background-color: rgba(247, 249, 252, 0.7);
      border-radius: 8px;
      padding: 25px;
      margin-top: 30px;
      border: 1px solid rgba(108, 99, 255, 0.2);
    }
    
    .algorithm-info h4 {
      margin-top: 25px;
      margin-bottom: 15px;
      color: var(--primary-color);
    }
    
    ul {
      padding-left: 20px;
      margin-bottom: 20px;
    }
    
    li {
      margin-bottom: 8px;
    }
    
    .highlight-info {
      background-color: rgba(255, 230, 109, 0.2);
      border-left: 4px solid var(--accent-color);
      padding: 15px;
      margin: 20px 0;
      border-radius: 5px;
    }
    
    .palindrome-length {
      font-size: 14px;
      color: var(--text-light);
      background-color: rgba(108, 99, 255, 0.1);
      padding: 3px 8px;
      border-radius: 20px;
      margin-left: 8px;
      font-family: monospace;
    }
    
    .skipped-algorithm {
      opacity: 0.8;
      position: relative;
    }
    
    .skipped-algorithm::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(255, 255, 255, 0.1);
      border-radius: var(--border-radius);
      z-index: 1;
    }
    
    .badge {
      display: inline-block;
      padding: 0.25em 0.4em;
      font-size: 75%;
      font-weight: 700;
      line-height: 1;
      text-align: center;
      white-space: nowrap;
      vertical-align: baseline;
      border-radius: 0.25rem;
    }
    
    .bg-warning {
      background-color: var(--warning-color);
      color: white;
    }
    
    #errorContainer {
      display: none;
      background-color: var(--danger-color);
      color: white;
      padding: 12px 20px;
      border-radius: var(--border-radius);
      margin-bottom: 20px;
      animation: fadeIn 0.3s;
    }
    
    #loader {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.7);
      z-index: 9999;
      justify-content: center;
      align-items: center;
      flex-direction: column;
    }
    
    .loader-content {
      text-align: center;
      color: white;
    }
    
    .loader-spinner {
      width: 60px;
      height: 60px;
      border: 5px solid var(--primary-color);
      border-top: 5px solid transparent;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin-bottom: 20px;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    /* Responsive adjustments */
    @media (max-width: 768px) {
      .main-content {
        padding: 15px;
      }
      
      .container {
        padding: 25px;
      }
      
      .performance {
        flex-direction: column;
        gap: 15px;
      }
      
      .header {
        padding: 0 1rem;
      }
      
      .header .logo {
        font-size: 1.2rem;
      }
      
      .nav-links li {
        margin-left: 1rem;
      }
    }
    
    /* Loading overlay for long-running operations */
    .loading-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.7);
      z-index: 9999;
      justify-content: center;
      align-items: center;
      flex-direction: column;
    }
    
    .loading-content {
      text-align: center;
      color: white;
    }
    
    .spinner {
      width: 60px;
      height: 60px;
      border: 5px solid var(--primary-color);
      border-top: 5px solid transparent;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin-bottom: 20px;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    /* Error message container */
    .error-message {
      display: none;
      background-color: var(--danger-color);
      color: white;
      padding: 15px 20px;
      border-radius: var(--border-radius);
      margin-bottom: 20px;
      animation: fadeIn 0.3s;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    /* Skipped algorithm styling */
    .algorithm-card.skipped {
      opacity: 0.7;
      position: relative;
    }
    
    .algorithm-card.skipped::before {
      content: "Skipped";
      position: absolute;
      top: 10px;
      right: 10px;
      background-color: var(--warning-color);
      color: white;
      font-size: 12px;
      font-weight: bold;
      padding: 3px 8px;
      border-radius: 4px;
      z-index: 2;
    }
    
    /* Sample buttons styling */
    .sample-files {
      margin: 25px 0;
      text-align: center;
    }
    
    .sample-buttons {
      display: flex;
      justify-content: center;
      gap: 10px;
      flex-wrap: wrap;
    }
    
    .sample-btn {
      background: linear-gradient(135deg, var(--tertiary-color), var(--primary-color));
      color: white;
      border: none;
      padding: 10px 15px;
      border-radius: var(--border-radius);
      cursor: pointer;
      font-size: 14px;
      font-weight: 500;
      transition: var(--transition);
      width: auto;
      max-width: none;
      margin: 0;
      display: inline-flex;
      align-items: center;
      gap: 5px;
      box-shadow: 0 2px 5px rgba(108, 99, 255, 0.2);
    }
    
    .sample-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(108, 99, 255, 0.3);
    }
    
    .sample-btn i {
      font-size: 1.1rem;
    }
    
    .sample-files-section {
      margin-top: 20px;
      border-top: 1px dashed #ddd;
      padding-top: 15px;
      text-align: center;
    }
    
    .sample-files-section h4 {
      margin-bottom: 15px;
      color: var(--text-light);
      font-size: 16px;
    }
    
    @media (max-width: 768px) {
      .sample-buttons {
        flex-direction: column;
        align-items: center;
      }
    }
    
    /* Show more button for long palindromes */
    .show-more-btn {
      display: inline-block;
      margin-left: 10px;
      background-color: var(--primary-color);
      color: white;
      border: none;
      border-radius: 4px;
      padding: 2px 8px;
      font-size: 12px;
      cursor: pointer;
      transition: var(--transition);
    }
    
    .show-more-btn:hover {
      background-color: var(--primary-dark);
    }
    
    /* Modal for displaying full palindrome */
    .palindrome-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.7);
      z-index: 9999;
      justify-content: center;
      align-items: center;
    }
    
    .palindrome-modal-content {
      background-color: white;
      padding: 25px;
      border-radius: var(--border-radius);
      max-width: 80%;
      max-height: 80%;
      overflow-y: auto;
      position: relative;
    }
    
    .palindrome-modal-close {
      position: absolute;
      top: 10px;
      right: 15px;
      font-size: 24px;
      cursor: pointer;
      color: var(--text-light);
    }
    
    .full-palindrome {
      background-color: rgba(108, 99, 255, 0.05);
      padding: 15px;
      border-radius: 8px;
      border-left: 3px solid var(--primary-color);
      margin: 15px 0;
      word-break: break-all;
      font-family: monospace;
      white-space: pre-wrap;
      max-height: 300px;
      overflow-y: auto;
    }
    
    .algorithm-order-info {
      background-color: #f0f8ff;
      border-left: 4px solid #1e90ff;
      padding: 10px 15px;
      margin-bottom: 20px;
      border-radius: 4px;
      font-size: 0.9em;
    }
    
    .timing-details {
      margin-top: 8px;
      padding: 8px;
      background-color: #f8f9fa;
      border-radius: 4px;
      font-size: 0.85em;
    }
    
    .detail-label {
      font-weight: bold;
      margin-bottom: 4px;
    }
    
    .detail-value {
      font-family: monospace;
      word-break: break-all;
    }
    
    .iterations {
      font-size: 0.8em;
      color: #666;
      margin-left: 5px;
    }
    
    .fastest-time {
      color: #2e7d32;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <!-- Header with Navigation -->
  <header class="header">
    <div class="logo">
      <i class="fas fa-code"></i>
      <span>LPS Analyzer</span>
    </div>
    <nav>
      <ul class="nav-links">
        <li class="active"><a href="index.html">Home</a></li>
        <li><a href="about.html">About</a></li>
      </ul>
    </nav>
  </header>

  <div class="loading-overlay" id="loadingOverlay">
    <div class="loading-content">
      <div class="spinner"></div>
      <h3 id="loadingText">Processing...</h3>
      <p style="margin-top: 10px; font-size: 14px;">This may take a moment for large files...</p>
    </div>
  </div>

  <div class="main-content">
    <h1>Longest Palindromic Substring Analyzer</h1>
    
    <div class="error-message" id="errorMessage"></div>
    
    <div class="container">
      <div class="explanation">
        <h3>What is a Palindromic Substring?</h3>
        <p>A palindrome is a sequence that reads the same forward and backward. For example, "racecar", "level", and "madam" are palindromes.</p>
        <p><strong>This analyzer:</strong></p>
        <ul>
          <li>Finds the <strong>longest</strong> palindromic substring in your text</li>
          <li><strong>Ignores letter case</strong> (e.g., "RaceCar" is treated the same as "racecar")</li>
          <li><strong>Ignores spaces</strong> when comparing characters (e.g., "race car" is treated the same as "racecar")</li>
          <li>Will identify "pip gag racecar racecar gag pip" as a single palindrome (ignoring spaces)</li>
          <li>When multiple palindromes of the same maximum length exist, returns the <strong>first one</strong> found in the text</li>
          <li>Compares three different algorithms with different time and space complexities</li>
        </ul>
        
        <div class="highlight-info">
          <i class="fas fa-info-circle"></i> <strong>Important:</strong> Both spaces and letter case are ignored when detecting palindromes. This means "Race Car" is considered equivalent to "racecar" for palindrome detection. Punctuation still matters.
        </div>
        
        <div class="highlight-info" style="background-color: rgba(78, 205, 196, 0.1); border-left-color: var(--tertiary-color);">
          <i class="fas fa-file-alt"></i> <strong>Large Files:</strong> All three algorithms will run on your input, regardless of size. For very large files (over 10,000 characters), some algorithms may take longer to complete, but they will all run and produce results. If an algorithm takes too long, you'll still see the results with a warning indicator.
        </div>
      </div>
      
      <div class="input-section">
        <div class="tabs">
          <div class="tab active" data-tab="text"><i class="fas fa-keyboard"></i> Text Input</div>
          <div class="tab" data-tab="file"><i class="fas fa-file-upload"></i> File Upload</div>
        </div>
        
        <div class="tab-content active" id="text-tab">
          <textarea id="inputString" placeholder="Enter text to analyze, e.g., 'racecar', 'A man, a plan, a canal: Panama', or a longer passage..."></textarea>
          
          <div class="sample-files-section">
            <h4>Try a sample file:</h4>
            <div class="sample-buttons">
              <button type="button" id="smallSampleBtn" class="sample-btn"><i class="fas fa-file-alt"></i> Small Sample</button>
              <button type="button" id="mediumSampleBtn" class="sample-btn"><i class="fas fa-file-alt"></i> Medium Sample</button>
              <button type="button" id="largeSampleBtn" class="sample-btn"><i class="fas fa-file-alt"></i> Large Sample</button>
            </div>
          </div>
        </div>
        
        <div class="tab-content" id="file-tab">
          <div class="file-upload" id="fileUploadArea">
            <i class="fas fa-file-upload"></i>
            <p>Drag & drop your text file here, or click to browse</p>
            <input type="file" id="fileInput" accept=".txt,.md,.text">
            <div class="file-info" id="fileInfo">Max file size: 10MB</div>
            <div class="accepted-files">
              Accepted file types: <span>.txt</span> <span>.md</span> <span>.text</span>
            </div>
          </div>
        </div>
        
        <button type="button" id="runButton"><i class="fas fa-play"></i> Run Algorithms</button>
      </div>
      
      <div id="results">
        <h2 class="comparison-header">Algorithm Comparison Results</h2>
        
        <div class="result-card naive">
          <div class="result-title">
            Naive Approach
            <span class="complexity" title="Time complexity indicates how the algorithm's execution time grows relative to the input size">O(n²)</span>
          </div>
          <div class="result-content">
            <p><strong>Longest palindrome:</strong> <span id="naive-result">Result</span> <span id="naive-length" class="palindrome-length"></span></p>
            <div class="palindrome-preview" id="naive-preview"></div>
            <div class="index-info" id="naive-index"></div>
          </div>
          <div class="performance">
            <div class="performance-item">
              <i class="fas fa-clock"></i>
              <span id="naive-time">0 ms</span>
              <span class="tooltip">ⓘ<span class="tooltip-text">Execution time measures how long the algorithm took to find the longest palindrome.</span></span>
            </div>
            <div class="performance-item">
              <i class="fas fa-memory"></i>
              <span id="naive-memory">0 MB</span>
              <span class="tooltip">ⓘ<span class="tooltip-text">Memory usage tracks how much additional heap memory was required to run the algorithm.</span></span>
            </div>
          </div>
        </div>
        
        <div class="result-card dp">
          <div class="result-title">
            Dynamic Programming
            <span class="complexity">O(n²)</span>
          </div>
          <div class="result-content">
            <p><strong>Longest palindrome:</strong> <span id="dp-result">Result</span> <span id="dp-length" class="palindrome-length"></span></p>
            <div class="palindrome-preview" id="dp-preview"></div>
            <div class="index-info" id="dp-index"></div>
          </div>
          <div class="performance">
            <div class="performance-item">
              <i class="fas fa-clock"></i>
              <span id="dp-time">0 ms</span>
              <span class="tooltip">ⓘ<span class="tooltip-text">Execution time measures how long the algorithm took to find the longest palindrome.</span></span>
            </div>
            <div class="performance-item">
              <i class="fas fa-memory"></i>
              <span id="dp-memory">0 MB</span>
              <span class="tooltip">ⓘ<span class="tooltip-text">Memory usage tracks how much additional heap memory was required to run the algorithm.</span></span>
            </div>
          </div>
        </div>
        
        <div class="result-card manacher">
          <div class="result-title">
            Manacher's Algorithm
            <span class="complexity">O(n)</span>
          </div>
          <div class="result-content">
            <p><strong>Longest palindrome:</strong> <span id="manacher-result">Result</span> <span id="manacher-length" class="palindrome-length"></span></p>
            <div class="palindrome-preview" id="manacher-preview"></div>
            <div class="index-info" id="manacher-index"></div>
          </div>
          <div class="performance">
            <div class="performance-item">
              <i class="fas fa-clock"></i>
              <span id="manacher-time">0 ms</span>
              <span class="tooltip">ⓘ<span class="tooltip-text">Execution time measures how long the algorithm took to find the longest palindrome.</span></span>
            </div>
            <div class="performance-item">
              <i class="fas fa-memory"></i>
              <span id="manacher-memory">0 MB</span>
              <span class="tooltip">ⓘ<span class="tooltip-text">Memory usage tracks how much additional heap memory was required to run the algorithm.</span></span>
            </div>
          </div>
        </div>
        
        <div class="algorithm-info">
          <h3>About the Algorithms</h3>
          <p><strong>Naive Approach:</strong> Expands around each possible center (both characters and spaces between) to find palindromes. Simple but less efficient for large inputs. For each position, it attempts to expand outward as far as possible while maintaining palindrome properties.</p>
          
          <p><strong>Dynamic Programming:</strong> Uses a table to store whether each substring is a palindrome, building from smaller to larger substrings. It's more efficient than the naive approach for medium-sized inputs but consumes more memory. For very large inputs (>1000 characters), this implementation automatically switches to a more memory-efficient algorithm to avoid excessive memory usage.</p>
          
          <p><strong>Manacher's Algorithm:</strong> A specialized approach that cleverly reuses previous computations to achieve linear time complexity. It's the most efficient algorithm for large inputs, using techniques like symmetry to avoid redundant comparisons. The algorithm transforms the string by adding special characters between each character to handle both odd and even length palindromes uniformly.</p>
          
          <h4>How Palindromes Are Detected</h4>
          <p>All three algorithms match characters with these rules:</p>
          <ul>
            <li>Letter case is ignored: "RaceCar" IS considered a palindrome (equivalent to "racecar")</li>
            <li>Spaces are ignored: "race car" IS considered a palindrome (equivalent to "racecar")</li>
            <li>Punctuation is significant: "race,car" is NOT a palindrome</li>
            <li>When multiple palindromes of the same length exist, only the first one found is returned</li>
          </ul>
          
          <h4>About Performance Measurements</h4>
          <p>This application measures two key performance metrics:</p>
          <ul>
            <li><strong>Execution Time:</strong> How long each algorithm takes to find the longest palindrome (measured in milliseconds)</li>
            <li><strong>Memory Usage:</strong> How much additional memory each algorithm consumes during execution (measured in kilobytes)</li>
          </ul>
          
          <div class="highlight-info">
            <i class="fas fa-info-circle"></i> <strong>Note on Memory Measurements:</strong> Memory measurements are calculated by comparing heap usage before and after algorithm execution. In some cases, Node.js's automatic garbage collection may run during algorithm execution, which can result in measurement anomalies. When this happens, the affected measurements are marked with an asterisk (*). These anomalies do not affect the actual palindrome detection or time measurements.
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <div class="palindrome-modal" id="palindromeModal">
    <div class="palindrome-modal-content">
      <span class="palindrome-modal-close">&times;</span>
      <h3>Full Palindrome</h3>
      <div class="full-palindrome" id="fullPalindromeContent"></div>
    </div>
  </div>
  
  <script>
    // Define algorithm friendly names
    const algorithmNames = {
      'naive': 'Naive Approach',
      'dp': 'Dynamic Programming',
      'manacher': 'Manacher\'s Algorithm'
    };
    
    document.addEventListener('DOMContentLoaded', () => {
      // Common elements
      const inputString = document.getElementById('inputString');
      const resultsDiv = document.getElementById('results');
      const runButton = document.getElementById('runButton');
      
      // Tab switching
      const tabs = document.querySelectorAll('.tab');
      const tabContents = document.querySelectorAll('.tab-content');
      
      tabs.forEach(tab => {
        tab.addEventListener('click', () => {
          const tabId = tab.getAttribute('data-tab');
          
          // Update active tab
          tabs.forEach(t => t.classList.remove('active'));
          tab.classList.add('active');
          
          // Update active content
          tabContents.forEach(content => content.classList.remove('active'));
          document.getElementById(`${tabId}-tab`).classList.add('active');
        });
      });
      
      // Sample files functionality
      const smallSampleBtn = document.getElementById('smallSampleBtn');
      const mediumSampleBtn = document.getElementById('mediumSampleBtn');
      const largeSampleBtn = document.getElementById('largeSampleBtn');
      
      // Load sample file content
      async function loadSampleFile(filename) {
        try {
          // Show loading indicator
          showLoading(`Loading ${filename}...`);
          
          // Fetch the sample file
          const response = await fetch(`/PreSets/${filename}`);
          if (!response.ok) {
            throw new Error(`Failed to load sample file (${response.status})`);
          }
          
          // Read the file content
          const content = await response.text();
          
          // Update the textarea with the file content
          inputString.value = content;
          
          // Ensure we're on the text input tab
          tabs.forEach(t => t.classList.remove('active'));
          tabContents.forEach(c => c.classList.remove('active'));
          document.querySelector('[data-tab="text"]').classList.add('active');
          document.getElementById('text-tab').classList.add('active');
          
          // Hide any previous results
          resultsDiv.style.display = 'none';
          
          hideLoading();
          
          // Optional: Scroll to the textarea to show the loaded content
          inputString.scrollIntoView({ behavior: 'smooth' });
        } catch (error) {
          console.error('Error loading sample file:', error);
          showError(`Error loading sample file: ${error.message}`);
          hideLoading();
        }
      }
      
      // Add click handlers for sample buttons
      smallSampleBtn.addEventListener('click', () => {
        console.log('Loading small sample file');
        loadSampleFile('smallImproved.txt');
      });
      
      mediumSampleBtn.addEventListener('click', () => {
        console.log('Loading medium sample file');
        loadSampleFile('mediumImproved.txt');
      });
      
      largeSampleBtn.addEventListener('click', () => {
        console.log('Loading large sample file');
        loadSampleFile('largeImproved.txt');
      });
      
      // File upload handling
      const fileUploadArea = document.getElementById('fileUploadArea');
      const fileInput = document.getElementById('fileInput');
      const fileInfo = document.getElementById('fileInfo');
      
      fileUploadArea.addEventListener('click', () => {
        fileInput.click();
      });
      
      fileUploadArea.addEventListener('dragover', (e) => {
        e.preventDefault();
        fileUploadArea.style.borderColor = '#4361ee';
        fileUploadArea.style.backgroundColor = 'rgba(67, 97, 238, 0.1)';
      });
      
      fileUploadArea.addEventListener('dragleave', () => {
        fileUploadArea.style.borderColor = '#ddd';
        fileUploadArea.style.backgroundColor = '#fafafa';
      });
      
      fileUploadArea.addEventListener('drop', (e) => {
        e.preventDefault();
        fileUploadArea.style.borderColor = '#ddd';
        fileUploadArea.style.backgroundColor = '#fafafa';
        
        if (e.dataTransfer.files.length) {
          handleFileSelection(e.dataTransfer.files[0]);
        }
      });
      
      fileInput.addEventListener('change', () => {
        if (fileInput.files.length) {
          handleFileSelection(fileInput.files[0]);
        }
      });
      
      function handleFileSelection(file) {
        // Check file size (max 10MB)
        if (file.size > 10 * 1024 * 1024) {
          fileInfo.textContent = 'Error: File exceeds 10MB limit';
          fileInfo.style.color = '#ef476f';
          return;
        }
        
        // Check file type
        if (!['text/plain', 'text/markdown', 'text/text', 'application/octet-stream'].includes(file.type) && 
            !file.name.endsWith('.txt') && !file.name.endsWith('.md') && !file.name.endsWith('.text')) {
          fileInfo.textContent = 'Error: Only text files are supported (.txt, .md, .text)';
          fileInfo.style.color = '#ef476f';
          return;
        }
        
        // Display file info
        fileInfo.textContent = `Selected: ${file.name} (${formatFileSize(file.size)})`;
        fileInfo.style.color = '#06d6a0';
        
        // Store the file for submission
        selectedFile = file;
        
        // Option 1: Read and display in textarea
        const reader = new FileReader();
        reader.onload = (e) => {
          document.getElementById('inputString').value = e.target.result;
          // Switch to text tab to show the content
          tabs[0].click();
        };
        reader.readAsText(file);
        
        // Enable direct upload button
        document.getElementById('uploadButton').style.display = 'block';
      }
      
      function formatFileSize(bytes) {
        if (bytes < 1024) return bytes + ' bytes';
        else if (bytes < 1024 * 1024) return (bytes / 1024).toFixed(1) + ' KB';
        else return (bytes / (1024 * 1024)).toFixed(1) + ' MB';
      }
      
      // Add upload button to file tab
      const fileTab = document.getElementById('file-tab');
      const uploadButton = document.createElement('button');
      uploadButton.id = 'uploadButton';
      uploadButton.innerHTML = '<i class="fas fa-cloud-upload-alt"></i> Process File Directly';
      uploadButton.style.display = 'none';
      uploadButton.style.marginTop = '25px';
      fileTab.appendChild(uploadButton);
      
      // Add direct file upload handler
      let selectedFile = null;
      uploadButton.addEventListener('click', async () => {
        if (!selectedFile) {
          showError('Please select a file first');
          return;
        }
        
        // Reset UI
        resultsDiv.style.display = 'none';
        showLoading('Processing file...');
        uploadButton.disabled = true;
        runButton.disabled = true; // Disable run button during upload
        
        // Add a timeout for user feedback if process takes too long
        const progressMessages = [
          {time: 3000, message: 'Reading your file...'},
          {time: 6000, message: 'Large file detected, processing might take a moment...'},
          {time: 10000, message: 'Processing with advanced algorithms...'},
          {time: 20000, message: 'Optimizing for large input...'},
          {time: 40000, message: 'Almost there...'},
          {time: 60000, message: 'This is a very large file, please be patient...'}
        ];
        
        const progressTimers = progressMessages.map(item => {
          return setTimeout(() => {
            document.getElementById('loadingText').textContent = item.message;
          }, item.time);
        });
        
        try {
          console.log('Starting file upload process');
          document.getElementById('loadingText').textContent = 'Uploading file...';
          
          // Create form data for file upload
          const formData = new FormData();
          formData.append('file', selectedFile);
          
          // Send to server with timeout set higher for large files
          const controller = new AbortController();
          const timeoutId = setTimeout(() => controller.abort(), 120000); // 2 minute timeout
          
          const response = await fetch('/upload', {
            method: 'POST',
            body: formData,
            signal: controller.signal
          });
          
          clearTimeout(timeoutId);
          console.log('Got response from server, status:', response.status);
          
          // Try to parse the response
          let data;
          try {
            data = await response.json();
            console.log('Parsed response data');
          } catch (parseErr) {
            console.error('Error parsing server response:', parseErr);
            throw new Error('Could not read server response. The file may be too large to process.');
          }
          
          if (!response.ok) {
            console.error('Server returned error:', data);
            throw new Error(data?.error || `Server error (status ${response.status})`);
          }
          
          // If successful, display the results
          console.log('Processing successful, displaying results');
          displayResults(data);
          
          // Show a shortened version in the textarea for reference
          if (data.fullLength > 1000) {
            document.getElementById('inputString').value = 
              (data.input || '') + `\n\n[File content truncated for display (${data.fullLength} characters total)]`;
            // Switch to text tab to show content
            tabs[0].click();
          }
        } catch (error) {
          console.error('File upload/processing error:', error);
          if (error.name === 'AbortError') {
            showError('Processing timed out. Your file may be too large or complex for analysis.');
          } else {
            showError(error.message || 'Error processing file. Please try a smaller or different file.');
          }
        } finally {
          // Clear all progress timers
          progressTimers.forEach(timerId => clearTimeout(timerId));
          hideLoading();
          uploadButton.disabled = false;
          runButton.disabled = false;
        }
      });
      
      // Form submission and result display
      runButton.addEventListener('click', async () => {
        const text = inputString.value.trim();
        
        if (!text) {
          showError('Please enter text or upload a file');
          return;
        }
        
        // Reset UI
        resultsDiv.style.display = 'none';
        showLoading('Processing text...');
        runButton.disabled = true;
        
        try {
          // Use relative URL which will work both locally and when deployed
          const response = await fetch('/runAlgorithms', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify({ inputString: text }),
          });
          
          // Try to parse the response as JSON
          let data;
          
          try {
            const contentType = response.headers.get('content-type');
            if (contentType && contentType.includes('application/json')) {
              data = await response.json();
            } else {
              // Not JSON, could be HTML error page
              const textResponse = await response.text();
              throw new Error(`Server returned non-JSON response: ${textResponse.substring(0, 100)}...`);
            }
          } catch (parseError) {
            console.error('Error parsing response:', parseError);
            throw new Error('Unable to parse server response. Please try again.');
          }
          
          if (!response.ok) {
            throw new Error(data?.error || `Server error: ${response.status}`);
          }
          
          displayResults(data);
        } catch (error) {
          console.error('Request error:', error);
          showError(error.message || 'Error processing request');
        } finally {
          hideLoading();
          runButton.disabled = false;
        }
      });
      
      function formatMemory(bytes) {
        if (!bytes || isNaN(bytes)) return '0 B';
        if (bytes < 1024) return bytes.toFixed(2) + ' B';
        else if (bytes < 1024 * 1024) return (bytes / 1024).toFixed(2) + ' KB';
        else return (bytes / (1024 * 1024)).toFixed(2) + ' MB';
      }
      
      function displayResults(data) {
        const resultsDiv = document.getElementById('results');
        
        // Make sure results div is visible
        resultsDiv.style.display = 'block';
        
        resultsDiv.innerHTML = '';
        
        // Create summary box at the top
        const summaryDiv = document.createElement('div');
        summaryDiv.className = 'summary-box';
        summaryDiv.innerHTML = `
          <h3>Results Summary</h3>
          <p>Input length: ${data.fullLength.toLocaleString()} characters</p>
          <p>Longest palindrome length: ${data.maxPalindromeLength.toLocaleString()} characters</p>
        `;
        resultsDiv.appendChild(summaryDiv);
        
        // Sort algorithms by execution time (fastest first)
        const results = [...data.results].sort((a, b) => a.executionTime - b.executionTime);
        
        results.forEach(result => {
          const card = document.createElement('div');
          card.className = 'result-card';
          
          // Truncate palindrome for display (show only first 50 chars by default)
          const palindrome = result.result;
          const truncatedPalindrome = palindrome.length > 50 
            ? palindrome.substring(0, 50) + '...' 
            : palindrome;
          
          // Create elements with basic info
          card.innerHTML = `
            <h3>${algorithmNames[result.algorithm] || result.algorithm}</h3>
            <div class="metrics">
              <div class="metric">
                <span class="label">Time:</span>
                <span class="value">${result.executionTime.toFixed(2)} ms</span>
              </div>
              <div class="metric">
                <span class="label">Memory:</span>
                <span class="value">${formatMemory(result.memoryUsed)}</span>
              </div>
              <div class="metric">
                <span class="label">Length:</span>
                <span class="value">${result.result.length} chars</span>
              </div>
              <div class="metric">
                <span class="label">Iterations:</span>
                <span class="value">${result.iterations || 1}</span>
              </div>
            </div>
            
            <div class="palindrome-container">
              <div class="palindrome-header">
                <h4>Found Palindrome:</h4>
                <button class="show-palindrome-btn">Show Palindrome</button>
              </div>
              <div class="palindrome-preview">${truncatedPalindrome}</div>
              <div class="palindrome-full" style="display:none;">${palindrome}</div>
            </div>
          `;
          
          resultsDiv.appendChild(card);
          
          // Add event listener to the button
          const showBtn = card.querySelector('.show-palindrome-btn');
          const previewDiv = card.querySelector('.palindrome-preview');
          const fullDiv = card.querySelector('.palindrome-full');
          
          showBtn.addEventListener('click', function() {
            if (fullDiv.style.display === 'none') {
              fullDiv.style.display = 'block';
              previewDiv.style.display = 'none';
              showBtn.textContent = 'Hide Palindrome';
            } else {
              fullDiv.style.display = 'none';
              previewDiv.style.display = 'block';
              showBtn.textContent = 'Show Palindrome';
            }
          });
        });
      }
      
      function showError(message) {
        const errorEl = document.getElementById('errorMessage');
        errorEl.textContent = message;
        errorEl.style.display = 'block';
        
        // Auto-hide after 10 seconds
        setTimeout(() => {
          errorEl.style.display = 'none';
        }, 10000);
      }
      
      function showLoading(message = 'Processing...') {
        const overlay = document.getElementById('loadingOverlay');
        const text = document.getElementById('loadingText');
        text.textContent = message;
        overlay.style.display = 'flex';
      }
      
      function hideLoading() {
        const overlay = document.getElementById('loadingOverlay');
        overlay.style.display = 'none';
      }
    });
  </script>
</body>
</html> 